<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>六维健康管理后台</title>
    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" type="text/css" href="js/dataTables/dataTables.bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <script type="text/javascript" src="bootstrap/js/jquery-3.2.0.min.js"></script>
    <script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/bootstrap-datetimepicker.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
</head>
<body>
    <!-- top nav -->
    <nav class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <div>
                <div class="nav navbar-nav"></div>
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown user">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <span class="glyphicon glyphicon-user"></span>
                            <span>your name</span>
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="#"><span class="glyphicon glyphicon-user"></span>我的账户</a></li>
                            <li><a href="#"><span class="glyphicon glyphicon-cog"></span>修改密码</a></li>
                            <li><a href="#"><span class="glyphicon glyphicon-envelope"></span>系统通知</a></li>
                            <li class="divider"></li>
                            <li><a href="#"><span class="glyphicon glyphicon-log-in"></span>退出</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- left nav -->
    <div class="nav-left">
        <div class="nav-title">
            <img src="images/test.jpg" class="img-circle">
            <a href="index.html">六维健康</a>
        </div>
        <ul>
            <li>
                <span class="glyphicon glyphicon-user">
                <span>预约</span>
            </li>
            <li class="li-active">
                <span class="glyphicon glyphicon-user">
                <span>登记</span>
            </li>
            <li>
                <span class="glyphicon glyphicon-user">
                <span>医生门诊</span>
            </li>
        </ul>
    </div>
    <!-- open left nav -->
     <div class="nav-open">
        <span class="glyphicon glyphicon-chevron-right"></span>
    </div>
    <!-- close left nav -->
    <div class="nav-close">
        <span class="glyphicon glyphicon-chevron-left"></span>
    </div>
    <!-- main -->
    <div class="main" style="padding: 30px;">        
        <div class="container-fluid">
            <div class="row" >
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">人员列表</h3>
                        </div>
                        <div class="panel-body">
                            <a class="btn btn-primary" href="index.html"><span class=" glyphicon glyphicon-plus" style="padding-right: 10px"></span>新建员工</a>
                            <div class="table">
                                <table class="table table-striped table-bordered table-hover" id="user-list">
                                    <thead>
                                        <tr>
                                            <th>父级编号</th>
                                            <th>省市区县</th>
                                            <th>城市名称</th>
                                            <th>邮政编码</th>
                                            <th>区号</th>
                                            <th>状态</th>
                                            <th>操作</th>
                                        </tr>
                                    </thead>
                                  
                                </table>
                            </div>
                        </div><!-- panel-body -->
                    </div><!-- panel -->
                </div>
           </div><!-- row -->
        </div>
    </div>
</body>
<script type="text/javascript" src="js/dataTables/jquery.dataTables.js"></script>
<script type="text/javascript" src="js/dataTables/dataTables.bootstrap.js"></script>
<script type="text/javascript">
    function del(cid){
        $.ajax({
            type:"post", 
            url:"http://192.168.1.168/api/deletetest",
            data:{id: cid}, 
            dataType:"jsonp",
            jsonp:"callback", 
            success:function(data){ 
                alert("success");
            },
            error:function(){
                alert('fail');
            }
        });
    }
    $(document).ready(function(){
        $("#user-list").DataTable({
            "bFilter": false,
            "info":true,
            "bLengthChange" : false,  
            "iDisplayLength" : 15,
            "bRetrieve": true,
            "bDestroy": true,
            "oLanguage" : {  
                    "sLengthMenu" : "每页显示 _MENU_ 条记录",  
                    "sZeroRecords" : "对不起，没有匹配的数据",  
                    "sInfo" : "第 _START_ - _END_ 条 / 共 _TOTAL_ 条数据",  
                    "sInfoEmpty" : "没有匹配的数据",  
                    "sInfoFiltered" : "(数据表中共 _MAX_ 条记录)",  
                    "sProcessing" : "正在加载中...",  
                    "sSearch" : "全文搜索：",  
                    "oPaginate" : {  
                        "sFirst" : "第一页",  
                        "sPrevious" : " 上一页 ",  
                        "sNext" : " 下一页 ",  
                        "sLast" : " 最后一页 "  
                    }

            },
            "serverSide": true,
            "ajax": {
                "url": "http://192.168.1.168/api/querytest",
                "dataType": "jsonp"
            },
            "columns" : [
                {"data": "cparent_id"},
                {"data": "cregion_grade"},
                {"data": "cregion_name"},
                {"data": "cdistrict_code"},
                {"data": "carea_code"},
                {"data": "cstatus"},
                {"data": null}
            ],
           "columnDefs": [
                {
                    "targets": [6],
                    "data": "cid",
                    "render": function(data, type, row, full) {
                        return "<a class='btn btn-sm btn-primary' style='margin-right:10px' href='index.html?id="+data.cid+"''>修改</a>"
                        +"<button class='btn btn-sm btn-danger' onclick='del("+data.cid+")'>删除</button>";

                    }
                }
            ]
        });

    });
</script>
</html>